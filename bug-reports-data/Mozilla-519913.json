{
    "project": "Mozilla", 
    "original_link": "http://dont.know.yet/519913", 
    "comments": [
        {
            "date": "2009-09-30 23:47:40", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I improved the Mac's IME management in bug 513952.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "On Mac, the focus lost event is happened after the native widget really lost\nthe focus.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But on Mac, we cannot request the IME related commands when the\nfocus is deactive.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Therefore, my patch commits the composition only internally\nif the focus is lost.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "And after the widget gets the focus, my patch requests\nIME to discard the composition.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "However, if a window is deactivated by the another our window being activated,\nthe composition isn't committed correctly.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Probably, the event handling target\nis wrong.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "http://mxr.mozilla.org/mozilla-central/source/layout/base/nsPresShell.cpp#6010\n> 6010     if (NS_IsEventTargetedAtFocusedWindow(aEvent)) {", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> 6011       nsIFocusManager* fm = nsFocusManager::GetFocusManager();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> 6012       if (!", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "fm)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> 6013          return NS_ERROR_FAILURE;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> 6014", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> 6015       nsCOMPtr<nsIDOMWindow> window;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> 6016       fm->GetFocusedWindow(getter_AddRefs(window));", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "So, perhaps, the composition event is sent to the active window, not the last\nfocused content in the window.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "We should check whether we are active or not.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "If\nwe are active, we should send the event to the last focused content in the\nwindow.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-10-01 06:18:55", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=404023) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v1.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "needs automated tests...", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-10-01 07:15:18", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=404032) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v1.1", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-10-01 11:47:02", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=404087) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v1.2", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-10-02 09:45:56", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=404274) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v1.3", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "this passes to all tests.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "# tryserver machines fails very many times randomly...", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-07 00:55:23", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "This bug can be reproduced on Windows too.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "And also there are some serious\nproblems.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Maybe, the focus refactoring broke the code.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The refactoring changed to that\nall key events and all IME events are not handled when we are deactive.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "By this\nchange, we cannot use some software keyboards which steals focus from us.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-07 06:19:41", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "This reminds me of bug 497839, maybe it is related.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Martijn Wargers (QA - IRC nick: mw22)", 
            "email": "Martijn Wargers (QA - IRC nick: mw22)"
        }, 
        {
            "date": "2009-12-07 10:22:50", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #6)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> This reminds me of bug 497839, maybe it is related.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "right.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It's going to be fixed by the patch too.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-15 16:17:43", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Can this patch be put up for review or is it still undergoing active\ndevelopment?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "In the latter case, is there an ETA?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "In the vein of bug 497839, the patch makes Thunderbird mozmill tests pass on my\nlinux box that are otherwise flakey using mozilla-central (likely depending on\nwindow positioning and/or me not moving my mouse at all) but are fine on\nmozilla-1.9.1.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I believe the Thunderbird mozmill tinderbox runners reflect\nthis as well.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "While we will likely degrade our tests to stop synthesizing\nkeyboard events in the short term, it would be nice to be able to have\nrealistic testing in the medium term.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Andrew Sutherland (:asuth)", 
            "email": "Andrew Sutherland (:asuth)"
        }, 
        {
            "date": "2009-12-15 21:56:17", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "See bug 528396, I need the new APIs for this patch's test.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "However, it's not\nfinished yet.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-16 13:56:17", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Should this block 1.9.2?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Comment 5 is pretty scary.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Olli Pettay [:smaug]", 
            "email": "Olli Pettay [:smaug]"
        }, 
        {
            "date": "2009-12-16 19:23:26", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #10)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> Should this block 1.9.2?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Comment 5 is pretty scary.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Yeah, but the patch could be risky...", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-16 23:55:29", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "But still, is there something now terribly broken which works on 1.9.1?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Olli Pettay [:smaug]", 
            "email": "Olli Pettay [:smaug]"
        }, 
        {
            "date": "2009-12-17 00:11:28", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Yes, e.g.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": ", IME composition string cannot be committed automatically by losing\nfocus.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "This confuses the IME state in gecko (gecko thinks the composition is\ncommitted but actually not so).", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "And Moji-palette of ATOK which is used to input some Unicode characters which\ncannot be inputted by IME cannot be used.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But this is rare case.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Maybe, if there is most critical issue, IME cannot use completely on some Linux\nsystem.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I've been told that some Window Manager's IME candidate window steals\nfocus from the client application.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "If such WM is still there, the users cannot\nuse IME.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "However, this is very critical issue, so, such users should have\nreported the bug to us already.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "So, I guess that such environments are not\nthere now.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-17 00:39:04", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Ok, so could we fix this and Bug 532422 the safest possible way, which is, I\nthink, to target IME/keyboard events to the previously focused element, if\nthere are no active Fx windows.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "That wouldn't fix the case where an Fx window is deactivated during\ncomposition by moving focus to another Fx window.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But that should be pretty\nrare case, I hope.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Olli Pettay [:smaug]", 
            "email": "Olli Pettay [:smaug]"
        }, 
        {
            "date": "2009-12-17 06:21:00", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #14)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> That wouldn't fix the case where an Fx window is deactivated during\n> composition by moving focus to another Fx window.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But that should be pretty\n> rare case, I hope.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Yes.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "You don't need to worry the case.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-17 15:25:32", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I'm curious as to why this was only raised as a blocking issue recently.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Did we\nnot think it was a blocker when originally filed?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Also, what's the relationship now between this bug and bug 532422?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Straight\ndupe?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Or was this just fixed-by bug 532422?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Mike Beltzner [:beltzner]", 
            "email": "Mike Beltzner [:beltzner]"
        }, 
        {
            "date": "2009-12-17 19:30:38", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "beltzner:", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "In bug 532422, we fixed the bugs only when Fx is deactive.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It's safest choice\nfor 1.9.2 branch and it fixes most important cases (Fennec's problem and some\nsoftware's problem).", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "There is only one bug.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The IME composition string isn't committed when the\nwindow is deactivating by another Fx's window getting focus.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But this is rare\ncase, the users can reproduce this bug easily, but they don't do such operation\nin daily use.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "And if we fix this, we need more risky change.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "So, we decided\nthat we don't fix the remain issue in 1.9.2.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2009-12-18 02:38:19", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "cancelling the 1.9.2?.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Olli Pettay [:smaug]", 
            "email": "Olli Pettay [:smaug]"
        }, 
        {
            "date": "2010-04-30 04:26:56", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=442663) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v2.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "This patch locks up key events and IME related events to each top level window.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I think that this change doesn't influence most add-ons.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "And I don't think\nthese (native) input events which are fired on deactive window should be\nhandled on active window.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2010-05-03 06:30:10", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(From update of attachment 442663 [details])", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+nsresult", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+PresShell::GetFocusedContent(nsIContent** aFocusedContent,\n>+                             nsPIDOMWindow** aFocusedWindow)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+{", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  NS_PRECONDITION(aFocusedContent, \"aFocusedContent is null\");", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  NS_PRECONDITION(aFocusedWindow, \"aFocusedWindow is null\");", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  nsIFocusManager* fm = nsFocusManager::GetFocusManager();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  NS_ENSURE_TRUE(fm, NS_ERROR_FAILURE);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">   nsCOMPtr<nsPIDOMWindow> window =", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">     do_QueryInterface(mDocument->GetWindow());", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-  NS_ENSURE_TRUE(window, nsnull);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  NS_ENSURE_TRUE(window, NS_ERROR_FAILURE);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">   nsCOMPtr<nsPIDOMWindow> rootWindow = window->GetPrivateRoot();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-  NS_ENSURE_TRUE(rootWindow, nsnull);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-  nsPIDOMWindow* focusedWindow;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-  nsFocusManager::GetFocusedDescendant(rootWindow, PR_TRUE, &focusedWindow);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-  return focusedWindow;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  NS_ENSURE_TRUE(rootWindow, NS_ERROR_FAILURE);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  // if there is no focused frame in this window, there isn't anything to\n>+  // fire a key event at so just return", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "this comment is in a strange place.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  nsCOMPtr<nsIDOMWindow> focusedWindow;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  nsCOMPtr<nsIDOMElement> focusedElement;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  fm->GetFocusedElementForWindow(rootWindow, PR_TRUE,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+                                 getter_AddRefs(focusedWindow),\n>+                                 getter_AddRefs(focusedElement));", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  nsCOMPtr<nsIContent> focusedContent = do_QueryInterface(focusedElement);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  nsCOMPtr<nsPIDOMWindow> focusedPIWindow = do_QueryInterface(focusedWindow);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  focusedContent.swap(*aFocusedContent);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  focusedPIWindow.swap(*aFocusedWindow);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  return NS_OK;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I don't quite understand the changes here.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "You change GetFocusedDescendant to GetFocusedElementForWindow.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "GetFocusedElementForWindow does actually call GetFocusedDescendant.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">   if (!", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "sDontRetargetEvents) {", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">     if (NS_IsEventTargetedAtFocusedWindow(aEvent)) {", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      nsIFocusManager* fm = nsFocusManager::GetFocusManager();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      if (!", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "fm)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-         return NS_ERROR_FAILURE;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      nsCOMPtr<nsIDOMWindow> window;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      fm->GetFocusedWindow(getter_AddRefs(window));", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      // if there is no focused frame, there isn't anything to fire a key event\n>-      // at so just return", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      nsCOMPtr<nsPIDOMWindow> piWindow = do_QueryInterface(window);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      if (!", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "piWindow) {", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-        // When all our windows are deactive, we should use the last focused\n>-        // window under our top level window.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-        piWindow = GetFocusedDOMWindowInOurWindow();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      }", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-      if (!", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "piWindow)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+      // if there is no focused frame in this window, there isn't anything to\n>+      // fire a key event at so just return", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Also this comment", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Could you describe, (and even write a comment somewhere in", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "PresShell::HandleEvent) that how", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "key events are handled with this patch.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Olli Pettay [:smaug]", 
            "email": "Olli Pettay [:smaug]"
        }, 
        {
            "date": "2010-05-03 22:22:07", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "> I don't quite understand the changes here.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> You change GetFocusedDescendant to GetFocusedElementForWindow.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> GetFocusedElementForWindow does actually call GetFocusedDescendant.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Ah, I'm sorry.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It's not needed change.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I'm confused by the change of bug 532422\nwhich wasn't in my plan.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2010-05-04 21:25:28", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=443555) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v2.1", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2010-05-26 12:48:07", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(From update of attachment 443555 [details])", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Enn should also review this.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Olli Pettay [:smaug]", 
            "email": "Olli Pettay [:smaug]"
        }, 
        {
            "date": "2010-06-14 02:13:31", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Enn, would you review the patch?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I pinged you by email, but you have never\nreplied...", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2010-06-14 08:54:03", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(From update of attachment 443555 [details])", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  otherWindow =", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+    window.open(\"about:blank\", \"_blank\", \"chrome,width=100,height=100\");", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  ok(otherWindow, \"failed to open other window\");", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  if (!", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "otherWindow) {", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+    SimpleTest.finish();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+    return;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  }", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  otherWindow.addEventListener(\"focus\", startTests, false);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+  timer = setTimeout(startTests, 1000);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "// prevents unexpected timeout\n>+  otherWindow.focus();", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "If you use a data url such as 'data:text/plain,test' instead of 'about:blank',\nyou can just use waitForFocus instead of listening to all these events\nmanually.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The main issue I have with this change is that you've now made key events fire\nat whatever the operating system happens to send them to, rather than what the\nfocus manager thinks is actually focused.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But I'm willing to try this for a bit to see if it doesn't end up causing any\nproblems.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Neil Deakin", 
            "email": "Neil Deakin"
        }, 
        {
            "date": "2010-06-14 20:55:17", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Created an attachment (id=451212) [details]", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Patch v2.2", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Thank you, Enn.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I'll land this patch.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }, 
        {
            "date": "2010-06-14 22:07:00", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "http://hg.mozilla.org/mozilla-central/rev/c7f3d1f216d6", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Masayuki Nakano (Mozilla Japan)", 
            "email": "Masayuki Nakano (Mozilla Japan)"
        }
    ], 
    "title": "The IME composition string isn't committed  on Mac when the window is deactivating"
}