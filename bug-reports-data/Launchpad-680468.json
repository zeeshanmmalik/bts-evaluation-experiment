{
    "project": "Launchpad", 
    "original_link": "http://dont.know.yet/680468", 
    "comments": [
        {
            "date": "2010-11-23 12:41:49", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "not able to make an allocation request", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "trunk", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "in hr holiday, allocation request (from Human Resoucres/Holydays / Allocation Requests).", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "1) create a new allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "2) save or confirm : bug", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Traceback (most recent call last):", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/netsvc.py\", line 489, in dispatch\n    result = ExportService.getService(service_name).", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "dispatch(method, auth, params)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/service/web_services.py\", line 586, in dispatch\n    res = fn(db, uid, *params)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/osv/osv.py\", line 57, in wrapper\n    return f(self, dbname, *args, **kwargs)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/osv/osv.py\", line 140, in execute\n    res = pool.execute_cr(cr, uid, obj, method, *args, **kw)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/osv/osv.py\", line 130, in execute_cr\n    return getattr(object, method)(cr, uid, *args, **kw)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/addons/hr_holidays/hr_holidays.py\", line 205, in create\n    return super(hr_holidays, self).", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "create(cr, uid, vals, context=context)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/osv/orm.py\", line 3748, in create\n    self._validate(cr, user, [id_new], context)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/server/bin/osv/orm.py\", line 1051, in _validate\n    if not fun(self, cr, uid, ids):", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/home/aline/openerp/trunk/addons/hr_holidays/hr_holidays.py\", line 254, in _check_date\n    date_from = time.strptime(rec['date_from'], '%Y-%m-%d %H:%M:%S')", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/usr/lib/python2.6/_strptime.py\", line 454, in _strptime_time\n    return _strptime(data_string, format)[0]", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "File \"/usr/lib/python2.6/_strptime.py\", line 322, in _strptime\n    found = format_regex.match(data_string)", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "TypeError: expected string or buffer", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "apr-tinyerp", 
            "email": "apr-tinyerp"
        }, 
        {
            "date": "2010-12-02 11:23:28", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "@Aline", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Bug has been Committed revision 4401 in lp:~openerp-report/openobject-addons/report-dev-apa.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "will be soon merge in the trunk.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thanks", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "apa", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "apa-tiny", 
            "email": "apa-tiny"
        }, 
        {
            "date": "2010-12-07 11:24:21", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "fix rejected, i reopen the bug", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "qdp", 
            "email": "qdp"
        }, 
        {
            "date": "2010-12-08 14:00:52", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "apr-tinyerp", 
            "email": "apr-tinyerp"
        }, 
        {
            "date": "2010-12-09 05:32:32", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "@Aline", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "context is not updated when you test in new fresh database.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "when you got the problem, then restart the client and after context is updated.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "May be it is also problem in GTK client.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thanks,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "apa", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "apa-tiny", 
            "email": "apa-tiny"
        }, 
        {
            "date": "2010-12-09 09:44:57", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Hello Aline,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It's working fine in Web client but not in GTK client.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "web-client rev:4067", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "trunk-server rev:3082", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "gtk-client rev:1711", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "trunk-addon: 3987", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thanks.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "vaibhav-openerp", 
            "email": "vaibhav-openerp"
        }, 
        {
            "date": "2010-12-14 14:31:57", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I tested again, and bug is still there.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "If i restart the client, i have no bug anymore.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "VDA you can reproduce with a new db, try to create an allocation request -> bug.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Restart your client, no more bug.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Can you try to fix it ?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "thanks", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "apr-tinyerp", 
            "email": "apr-tinyerp"
        }, 
        {
            "date": "2010-12-16 13:28:06", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "From we tested, something very fishy is going on in the clients.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "This error only occurs if you start a fresh new client, install a new database with it, install hr_holidays, then go to open the HR/Holidays/Allocation Requests screen.", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "In that case only, the context of the action is not applied, so when creating new requests in the next screen the create() method is called with only a partial context, where 'type:\"add\"' is missing, even though it is in the action definition.", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "For some undetermined reason, having the client call \"res.users.context_get()\" seems to cure the problem, which means that if you trigger it by logging out and back in the client, or by simply changing your user preferences, the problem goes away if you open the action again (and the correct context is passed).", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "To correctly solve this problem we need the GTK and Web team to explain precisely why this happens initially, and why this is linked to the reloading of context_get at some point?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Even weirder: after solving it by forcing a context_get call, you will not be able to reproduce it, even after creating a new db, unless you restart the client first (at least in GTK)", 
                    "is_in_email_summary": true
                }
            ], 
            "name": "odo-openerp", 
            "email": "odo-openerp"
        }, 
        {
            "date": "2010-12-16 13:55:19", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Hello Olivier,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "This is what happens in the gtk client:Gtk client just update the session's context only when the user creates a new session or he/she changes his preferences.", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "looking at the example above:", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "when the client tries to eval the context of the action from the session.context \naction context is :{\"search_default_my_leaves\": 1,'type':'add',\"search_default_department_id\": department_id}\nso now here a traceback appears because the client session context is does not know that the context has a new field department_id to be added and results in this :", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "ERROR:tools.expr_eval:{\"search_default_my_leaves\": 1,'type':'add',\"search_default_department_id\": department_id}\nTraceback (most recent call last):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "File \"/home/nch/OpenERP0910/Devs/Trunk/client/bin/tools/__init__.py\", line 51, in expr_eval\n    temp = eval(string, context)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "File \"<string>\", line 1, in <module>", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "NameError: name 'department_id' is not defined", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "which fails the update of the client's local context", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thanks,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "nch-openerp", 
            "email": "nch-openerp"
        }, 
        {
            "date": "2010-12-16 13:56:05", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Ok correction, after discussing more with GTK team, the real issue is simply that the clients fail to evaluate the context in some c\ncases because it contains this:", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "{\"search_default_my_leaves\": 1,'type':'add',\"search_default_department_id\": department_id}", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Notice the \"department_id\" variable at the end?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "This special trick is allowed to access \"context_\"-prefixed fields from the global session context.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "But it fails if the HR module was only recently installed, and the session context has not been reloaded since then, and thus does not have any \"context_department_id\" value.", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Hence the strange behavior we were seeing.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Now as to fix this, unfortunately the server does not have any way of notifying the client about new session context items..", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "the 2 cases where the session context is reloaded are hardcoded: upon login and when clicking on the OK button in the user preferences popup.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "odo-openerp", 
            "email": "odo-openerp"
        }, 
        {
            "date": "2010-12-30 14:15:47", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "can't we use \"context.get('department_id', False)\" instead of department_id ?", 
                    "is_in_email_summary": true
                }
            ], 
            "name": "fp-tinyerp", 
            "email": "fp-tinyerp"
        }, 
        {
            "date": "2010-12-31 12:19:41", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "+ 1", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "yes, the context should be fetched like that only.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "or", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "restart the client which does not seems feasible", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Transferring the post to addons-3 team to make the corrections.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thanks !", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "nch-openerp", 
            "email": "nch-openerp"
        }, 
        {
            "date": "2011-01-03 11:54:31", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Re: not able to make an allocation request", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Hello Aline,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Tested with latest addons and seems it is fixed.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "So, i am closing this bug.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "If you still facing same problem feel free to reopen this bug.", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thanks", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "psi-tinyerp", 
            "email": "psi-tinyerp"
        }
    ], 
    "title": "not able to make an allocation request"
}