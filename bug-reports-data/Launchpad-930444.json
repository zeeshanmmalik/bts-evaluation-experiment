{
    "contributors": [
        [
            "mbp", 
            "lexrank"
        ], 
        [
            "kevin-linuxservices", 
            "email"
        ]
    ], 
    "title": "keystone-manage: error: argument command: invalid choice: 'db' from postinst", 
    "comments": [
        {
            "date": "2012-02-10 22:11:06", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Precise A2 updated at time of this bug.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Just done an install of OpenStack and Keystone now has changed to an interactive session (breaking all previous unattended installs) due to introduction of dbconfig. ", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": " The install fails due to what looks like a syntax error creating entries in the database.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Replacing config file /etc/dbconfig-common/keystone.conf with new version granting access to database keystone for keystone@localhost: success.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "verifying access for keystone@localhost: success.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "creating database keystone: success.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "verifying database keystone exists: success.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "dbconfig-common: flushing administrative password\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "usage: keystone-manage [-h]\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                       {create_credential,create_endpoint_template,create_role,create_service,create_tenant,create_token,create_user,delete_credential,delete_endpoint_template,delete_role,delete_service,delete_tenant,delete_token,delete_user,downgrade_database,goto_database,grant_role,list_credentials,list_endpoint_templates,list_endpoints,list_roles,list_services,list_tenants,list_tokens,list_users,map_endpoint,revoke_role,sync_database,unmap_endpoint,update_credential,update_endpoint_template,update_role,update_service,update_tenant,update_token,update_user,upgrade_database,version,version_control_database}\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                       ...\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "keystone-manage: error: argument command: invalid choice: 'db' (choose from 'create_credential', 'create_endpoint_template', 'create_role', 'create_service', 'create_tenant', 'create_token', 'create_user', 'delete_credential', 'delete_endpoint_template', 'delete_role', 'delete_service', 'delete_tenant', 'delete_token', 'delete_user', 'downgrade_database', 'goto_database', 'grant_role', 'list_credentials', 'list_endpoint_templates', 'list_endpoints', 'list_roles', 'list_services', 'list_tenants', 'list_tokens', 'list_users', 'map_endpoint', 'revoke_role', 'sync_database', 'unmap_endpoint', 'update_credential', 'update_endpoint_template', 'update_role', 'update_service', 'update_tenant', 'update_token', 'update_user', 'upgrade_database', 'version', 'version_control_database')\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "dpkg: error processing keystone (--configure):\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": " subprocess installed post-installation script returned error exit status 2 Errors were encountered while processing:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": " keystone\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "E: Sub-process /usr/bin/dpkg returned an error code (1)\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "root@openstack2:/etc/dbconfig-common# dpkg -l | grep keystone\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "iF  keystone                         2012.1~e4~20120203.1574-0ubuntu2        Proposed OpenStack identity service - Daemons\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ii  python-keystone                  2012.1~e4~20120203.1574-0ubuntu2        Proposed OpenStack identity service - Python library\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Also:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "1) Is this auto create necessary / can it be optional?\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "kevin-linuxservices", 
            "email": "kevin-linuxservices"
        }, 
        {
            "date": "2012-02-13 00:16:48", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Status changed to 'Confirmed' because the bug affects multiple users.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "janitor", 
            "email": "janitor"
        }, 
        {
            "date": "2012-02-13 00:19:06", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I just hit this too when installing on to a fresh current precise image.\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I think there are really two bugs here:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "1- interactive configuration, which seems contrary to the normal Ubuntu practice or policy\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "2- the error from keystone-manage during installation\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "mbp", 
            "email": "mbp"
        }, 
        {
            "date": "2012-02-13 00:28:02", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "this is coming from keystone.postinst:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "        if [ \"$dbc_install\" = \"true\" ]\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "        then\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "            # On first install, create basics configuration and add roles             if [ -z \"$2\" ]\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "            then\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                sed -e \"s,_DBC_URL_,$SQL_CONNECTION,\" -i /etc/keystone/keystone.conf\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage database sync\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage role add Admin\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage role add Member\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage role add KeystoneAdmin\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage role add KeystoneServiceAdmin\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage role add sysadmin\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                keystone-manage role add netadmin\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "            fi\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "            if [ \"$dbc_upgrade\" = \"true\" ]\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "            then\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "                su -s /bin/sh -c 'exec keystone-manage db sync' keystone\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "            fi\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "        fi\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "It looks like this needs to be `keystone-manage sync_database` instead.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "mbp", 
            "email": "mbp"
        }, 
        {
            "date": "2012-02-13 00:50:10", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "There is a commit message in <http://bazaar.launchpad.net/~openstack-ubuntu-packagers/keystone/ubuntu/revision/29> suggesting this has been removed, but it doesn't seem to have actually been removed...\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "mbp", 
            "email": "mbp"
        }, 
        {
            "date": "2012-02-13 03:10:15", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I split out https://bugs.launchpad.net/ubuntu/+source/keystone/+bug/931236 for the issue of perhaps-unnecessary interactive configuration.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "mbp", 
            "email": "mbp"
        }, 
        {
            "date": "2012-02-15 22:30:12", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "This bug was fixed in the package keystone - 2012.1~e4~20120203.1574-0ubuntu3\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "---------------\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "keystone (2012.1~e4~20120203.1574-0ubuntu3) precise; ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "urgency=low\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "  * Update \"db sync\" to \"sync_database\" in postinst. (LP: #930444)\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "janitor", 
            "email": "janitor"
        }
    ], 
    "id": "930444", 
    "project": "Launchpad", 
    "original_link": "https://bugs.launchpad.net/ubuntu/+bug/930444"
}