{
    "project": "Mozilla", 
    "original_link": "http://dont.know.yet/487504", 
    "comments": [
        {
            "date": "2009-04-08 14:22:59", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Bug 475317 adds a volume-level slider, and I noticed that audio level I hear\nlags behind the value set by the controls.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I'd guess it's a few hundred\nmilliseconds.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Fast enough that it's < 1 second, but slow enough that it feels\nwrong.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Clicking mute/unmute exhibits the same behavior.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "The mute case is interesting, because the icon changes immediately.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "That's\ndriven by the volumechange event (not the actual click).", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "So the video backend\nis immediately sending out the event, even when the level heard by the user\nhasn't yet changed.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Justin Dolske [:dolske]", 
            "email": "Justin Dolske [:dolske]"
        }, 
        {
            "date": "2009-04-08 16:03:33", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I suspect it's the already buffered audio data that has been queued at the old\nvolume.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Chris Double (:doublec)", 
            "email": "Chris Double (:doublec)"
        }, 
        {
            "date": "2009-04-11 03:01:27", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I'm reluctant to mark this blocking because I'm not sure how we can fix it.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert O'Callahan (:roc) (Mozilla Corporation)", 
            "email": "Robert O'Callahan (:roc) (Mozilla Corporation)"
        }, 
        {
            "date": "2009-04-11 03:04:01", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "The way to fix it is to use platform API's to control the volume rather than\nadjusting the sample values directly.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Chris Double (:doublec)", 
            "email": "Chris Double (:doublec)"
        }, 
        {
            "date": "2009-04-11 03:15:20", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Hmm, for some reason I thought we had to adjust the sample values directly...", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert O'Callahan (:roc) (Mozilla Corporation)", 
            "email": "Robert O'Callahan (:roc) (Mozilla Corporation)"
        }, 
        {
            "date": "2009-04-11 03:15:55", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Because we didn't have independent control over the volume of each stream, or\nsomething?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert O'Callahan (:roc) (Mozilla Corporation)", 
            "email": "Robert O'Callahan (:roc) (Mozilla Corporation)"
        }, 
        {
            "date": "2009-04-11 03:17:38", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "We did it this way because libsydneyaudio didn't expose the api's fully for\nvolume control across all platforms (It still doesn't iirc).", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "And on Linux it\ncontrolled the master volume which was problematic as you mention in comment 5.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I don't know the capabilities of all platforms as to whether per stream control\nis possible in all cases.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "So we took the route of modifying the sample values.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Chris Double (:doublec)", 
            "email": "Chris Double (:doublec)"
        }, 
        {
            "date": "2009-04-11 03:21:42", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "OK, I'm still reluctant to mark this blocking if it depends on the existence of\nplatform APIs that may not exist :-)", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert O'Callahan (:roc) (Mozilla Corporation)", 
            "email": "Robert O'Callahan (:roc) (Mozilla Corporation)"
        }, 
        {
            "date": "2009-04-11 03:23:43", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I fully agree :-)", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Chris Double (:doublec)", 
            "email": "Chris Double (:doublec)"
        }, 
        {
            "date": "2009-04-11 03:26:04", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I'll make it wanted.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It would be nice if we used platform volume control APIs\nwhere they exist, and/or turned down the audio buffer if we think we can\nwithout skipping, but this doesn't really need to block IMHO.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert O'Callahan (:roc) (Mozilla Corporation)", 
            "email": "Robert O'Callahan (:roc) (Mozilla Corporation)"
        }, 
        {
            "date": "2009-04-13 15:48:50", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "i can repro this too on Mozilla/5.0 (Macintosh;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "U;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Intel Mac OS X 10.5;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "en-US;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "rv:1.9.1b4pre) Gecko/20090413 Shiretoko/3.5b4pre.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "The mute/unmute lags about\n.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "5 seconds off", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Tony Chung [:tchung]", 
            "email": "Tony Chung [:tchung]"
        }, 
        {
            "date": "2009-05-21 23:01:22", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "This is trivial to fix on Mac.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "The appropriate code already exists in\nsa_stream_set_volume_abs, which works per-stream.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "All we'd need to do is call\nit from nsAudioStream::SetVolume and leave mVolume set at 1.0.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "On Windows, some code exists in sa_stream_change_write_volume which could be\nused to implement sa_stream_set_volume_abs.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Unfortunately (despite being\npassed a per-stream handle) it affects the master \"Wave Out\" volume on\npre-Vista, and the per-app \"Wave Out\" on Vista and later systems.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "There's no\nway to control per-stream volume using the waveOut API.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "We'd need to switch to\nusing a more modern sound API to solve this.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "sa_stream_set_volume_abs is implemented on Linux (in all of the backends), but\nit has similar limitations to the existing Windows code, except there's no\nobvious \"modern API\" to switch to to solve this, either (though I suppose that\nmight eventually be PulseAudio once it's widespread enough).", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I don't think we can afford to buffer less (unless we can make it adaptive),\nsince we already have bug reports about audio glitches on slow or heavily\nloaded machines.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "A more complicated way to fix this would be to immediately suspend audio\nplayback when a volume change occurs, get the current playback position\n(ideally this would be sample accurate to be glitch-free, but maybe a \"fairly\"\naccurate value is fine if we can bear small glitches), purge the buffered data,\nremix it at the new volume, begin resubmitting the data, and resume the stream.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I don't think the existing sydneyaudio APIs are sufficient to permit this,\nthough.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Matthew Gregan (:kinetik)", 
            "email": "Matthew Gregan (:kinetik)"
        }, 
        {
            "date": "2009-05-21 23:32:14", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Or we could push the software volume control down into sydneyaudio, which would\nthen perform volume adjustment on the samples just before passing them to the\nOS.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "This would be easy to do in the existing Mac and Windows code, but the\nALSA code would need some restructuring.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Matthew Gregan (:kinetik)", 
            "email": "Matthew Gregan (:kinetik)"
        }, 
        {
            "date": "2009-06-02 11:32:23", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I noticed this in a test page I had open for Shiretoko on OSX.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I'd hit play on the <video> - the sound blasted out rather loudly.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I quickly\npaused, then toggled mute.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "On hitting play again, the sound blasted out once\nmore for a moment.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "nemo", 
            "email": "nemo"
        }, 
        {
            "date": "2010-04-12 09:02:59", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "The delay is at least a full second here on a Mac build from 04/11, FWIW.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Luis Villa", 
            "email": "Luis Villa"
        }, 
        {
            "date": "2010-04-26 11:18:42", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "When viewing air mozilla on Windows the delay can be 3+ seconds hitting the\nMute button.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "It's really annoying!", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Benjamin Smedberg [:bsmedberg]", 
            "email": "Benjamin Smedberg [:bsmedberg]"
        }, 
        {
            "date": "2010-05-30 20:52:11", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Per comment 11, it's not easy to fix this properly on all platforms, so it's\nunlikely to be fixed for beta1.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Matthew Gregan (:kinetik)", 
            "email": "Matthew Gregan (:kinetik)"
        }, 
        {
            "date": "2010-06-01 06:52:20", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Assuming this affects WebM video as well as ogg, this is going to be a pretty\nmajor black eye for us: having audio continue for seconds after you close a\nyoutube tab or hit the mute button is very noticeable.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "What can we accomplish\nin the beta timeframe (and for 3.6.x, if we decide to backport WebM)?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Benjamin Smedberg [:bsmedberg]", 
            "email": "Benjamin Smedberg [:bsmedberg]"
        }, 
        {
            "date": "2010-06-01 11:42:24", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Does audio actually continue after you close a tab?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "If so, that's a different\nbug.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert O'Callahan (:roc) (Mozilla Corporation)", 
            "email": "Robert O'Callahan (:roc) (Mozilla Corporation)"
        }, 
        {
            "date": "2010-06-01 11:47:46", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Yes, at least in air mozilla it has.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I can file that separately.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Benjamin Smedberg [:bsmedberg]", 
            "email": "Benjamin Smedberg [:bsmedberg]"
        }, 
        {
            "date": "2010-06-01 14:37:46", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Audio continuing after a tab closes is a different bug--we can stop audio\nimmediately by destroying the audio stream.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Matthew Gregan (:kinetik)", 
            "email": "Matthew Gregan (:kinetik)"
        }, 
        {
            "date": "2010-06-18 14:25:58", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Bumping this to beta2 per beta re-triage with dbaron.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "If this should indeed\nblock beta1, please re-nom.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Is this still looking like it's not going to make\nbeta1, regardless?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Damon Sicore (:damons)", 
            "email": "Damon Sicore (:damons)"
        }, 
        {
            "date": "2010-06-19 03:08:05", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "Was the bug for the 'close tab' issue in comment 19 filed?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Chris Double (:doublec)", 
            "email": "Chris Double (:doublec)"
        }
    ], 
    "title": "Audible changes to volume (and mute state) lag behind setting value"
}