{
    "project": "Mozilla", 
    "original_link": "http://dont.know.yet/341384", 
    "comments": [
        {
            "date": "2006-06-13 08:14:23", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I'm running Ubuntu 6.06 on AMD64.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "mozStorage::FinishAsyncIO is very slow on\nshutdown, and sometimes seems to hang.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Sometimes it takes 5-10 seconds, but\nI've let it go 30 seconds or so on a couple of occasions.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Haven't caught it in\na debugger in those cases.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-06-13 08:27:11", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Are you on a networked file system or anything like that?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Do you have it set to\nclear your history when you shut down?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Brett Wilson", 
            "email": "Brett Wilson"
        }, 
        {
            "date": "2006-06-13 08:33:05", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #1)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> Are you on a networked file system or anything like that?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "No.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> Do you have it set to clear your history when you shut down?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I don't believe so (the box is not in front of me, but it was a fresh OS\ninstall, and a trunk check out with no profile adjustments).", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-07-07 01:24:18", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "This regressed between 2006-05-10 04:00 and 2006-05-12 12:00.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "http://bonsai.mozilla.org/cvsquery.cgi?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "treeid=default&module=PhoenixTinderbox&branch=HEAD&branchtype=match&dir=&file=&filetype=match&who=&whotype=match&sortby=Date&hours=2&date=explicit&mindate=2006-05-10+04&maxdate=2006-05-12+12&cvsroot=%2Fcvsroot", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I'm guessing it was the thread manager landing since it touched the function\nRobert mentioned in mozStorageAsyncIO.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Hopefully Darin will know what's going on here.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Adam Guthrie", 
            "email": "Adam Guthrie"
        }, 
        {
            "date": "2006-07-10 16:05:57", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I'm not sure what's going on exactly, but I suspect that the fix would be\nisolated to the storage component.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "FinishAsyncIO should terminate.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Darin Fisher", 
            "email": "Darin Fisher"
        }, 
        {
            "date": "2006-07-10 16:48:41", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "#0  0x00002aaaadab1e22 in poll () from /lib/libc.so.6", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#1  0x00002aaaad168d00 in g_main_context_check () from", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/usr/lib/libglib-2.0.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#2  0x00002aaaad169374 in g_main_context_iteration () from", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/usr/lib/libglib-2.0.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#3  0x00002aaaafd20396 in nsAppShell::ProcessNextNativeEvent (this=<value\noptimized out>, mayWait=7)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/widget/src/gtk2/nsAppShell.cpp:144\n#4  0x00002aaaafd36c68 in nsBaseAppShell::DoProcessNextNativeEvent\n(this=0x6f0370, mayWait=7)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/widget/src/xpwidgets/nsBaseAppShell.cpp:136\n#5  0x00002aaaafd36f47 in nsBaseAppShell::OnProcessNextEvent (this=0x5f5040,\nthr=0x554590, mayWait=0,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "recursionDepth=<value optimized out>) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/home/sayrer/firefox/mozilla/widget/src/xpwidgets/nsBaseAppShell.cpp:231\n#6  0x00002aaaab30af32 in nsThread::ProcessNextEvent (this=0x554590, mayWait=1,\nresult=0x7fffffe3ba9c)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:469\n#7  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0x6f0370, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#8  0x00002aaaab30b458 in nsThread::Shutdown (this=0xd37a90) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:442", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#9  0x00002aaaaf1924d8 in mozStorageService::FinishAsyncIO (this=<value\noptimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:557\n#10 0x00002aaaaf1943bd in mozStorageService::Observe (this=0xd37930,\naSubject=<value optimized out>,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "aTopic=<value optimized out>, aData=<value optimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/storage/src/mozStorageService.cpp:160\n#11 0x00002aaaab2c2d40 in nsObserverList::NotifyObservers (this=0x8ffd20,\naSubject=0x0,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "aTopic=0x2aaaab33caab \"xpcom-shutdown-threads\", someData=0x0) at\n/home/sayrer/firefox/mozilla/xpcom/ds/nsObserverList.cpp:128\n#12 0x00002aaaab2c3e07 in nsObserverService::NotifyObservers (this=<value\noptimized out>, aSubject=0x0,", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "aTopic=0x2aaaab33caab \"xpcom-shutdown-threads\", someData=0x0)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/xpcom/ds/nsObserverService.cpp:174\n#13 0x00002aaaab2b72cf in NS_ShutdownXPCOM_P (servMgr=0x570a18) at\n/home/sayrer/firefox/mozilla/xpcom/build/nsXPComInit.cpp:720\n#14 0x00002aaaaace3252 in ~ScopedXPCOMStartup (this=0x7fffffe3bec0)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/toolkit/xre/nsAppRunner.cpp:553\n#15 0x00002aaaaace8575 in XRE_main (argc=<value optimized out>, argv=<value\noptimized out>, aAppData=<value optimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/toolkit/xre/nsAppRunner.cpp:2384\n#16 0x0000000000400788 in main (argc=7275376, argv=0x7) at", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-07-10 17:02:17", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I had the location of the hang wrong in IRC, it's here:", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "http://lxr.mozilla.org/seamonkey/source/storage/src/mozStorageAsyncIO.cpp#551", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The hang happens before AsyncWriteThread::Run() gets a chance to execute.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-07-10 18:09:25", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "> The hang happens before AsyncWriteThread::Run() gets a chance to execute.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Very interesting.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "That's confusing because the stack makes it look like\nAsyncWriteThread::Run is refusing to exit.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Darin Fisher", 
            "email": "Darin Fisher"
        }, 
        {
            "date": "2006-07-11 08:46:35", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "bt from all the threads", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 24 (Thread 1140881760 (LWP 21985)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#0  0x00002aaaaabcac8f in pthread_cond_timedwait@@GLIBC_2.3.2 () from\n/lib/libpthread.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#1  0x00002aaaab6bf5fd in pt_TimedWait (cv=0xbc20d8, ml=0xbc2128, timeout=0) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:280\n#2  0x00002aaaab6bfd93 in PR_WaitCondVar (cvar=0xbc20d0, timeout=60000) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:407\n#3  0x00002aaaab6c048d in PR_Wait (mon=0xbc2120, timeout=60000) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:584\n#4  0x00002aaaab2e4645 in nsAutoMonitor::Wait (this=<value optimized out>,\ninterval=1140881760) at nsAutoLock.h:286", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#5  0x00002aaaab30e719 in nsThreadPool::Run (this=0xbc2060) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThreadPool.cpp:200\n#6  0x00002aaaab30afea in nsThread::ProcessNextEvent (this=0x27a5b60,\nmayWait=1, result=0x4400716c) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:482", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#7  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0xbc20dc, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#8  0x00002aaaab30b14f in nsThread::ThreadFunc (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:251", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#9  0x00002aaaab6c5c24 in _pt_root (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptthread.c:220\n#10 0x00002aaaaabc80fa in start_thread () from /lib/libpthread.so.0\n#11 0x00002aaaadabace2 in clone () from /lib/libc.so.6", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#12 0x0000000000000000 in ??", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "()", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 18 (Thread 1140881760 (LWP 21985)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#0  0x00002aaaaabcac8f in pthread_cond_timedwait@@GLIBC_2.3.2 () from\n/lib/libpthread.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#1  0x00002aaaab6bf5fd in pt_TimedWait (cv=0xbc20d8, ml=0xbc2128, timeout=0) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:280\n#2  0x00002aaaab6bfd93 in PR_WaitCondVar (cvar=0xbc20d0, timeout=60000) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:407\n#3  0x00002aaaab6c048d in PR_Wait (mon=0xbc2120, timeout=60000) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:584\n#4  0x00002aaaab2e4645 in nsAutoMonitor::Wait (this=<value optimized out>,\ninterval=1140881760) at nsAutoLock.h:286", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#5  0x00002aaaab30e719 in nsThreadPool::Run (this=0xbc2060) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThreadPool.cpp:200\n#6  0x00002aaaab30afea in nsThread::ProcessNextEvent (this=0x27a5b60,\nmayWait=1, result=0x4400716c) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:482", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#7  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0xbc20dc, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#8  0x00002aaaab30b14f in nsThread::ThreadFunc (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:251", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#9  0x00002aaaab6c5c24 in _pt_root (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptthread.c:220\n#10 0x00002aaaaabc80fa in start_thread () from /lib/libpthread.so.0\n#11 0x00002aaaadabace2 in clone () from /lib/libc.so.6", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#12 0x0000000000000000 in ??", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "()", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 9 (Thread 1107310944 (LWP 21962)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#0  0x00002aaaaabcd9cb in __fsync_nocancel () from /lib/libpthread.so.0\n#1  0x00002aaaaf995aca in full_fsync (fd=46, fullSync=0, dataOnly=2) at\n/home/sayrer/firefox/mozilla/db/sqlite3/src/os_unix.c:1075", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#2  0x00002aaaaf995ae5 in unixSync (id=<value optimized out>, dataOnly=0) at\n/home/sayrer/firefox/mozilla/db/sqlite3/src/os_unix.c:1103", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#3  0x00002aaaaf971d69 in ProcessOneMessage (aMessage=0x29fa860) at\n/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:1317\n#4  0x00002aaaaf972097 in ProcessAsyncMessages () at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:1430\n#5  0x00002aaaaf972db8 in AsyncWriteThread::Run (this=0xf72440) at\n/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:447\n#6  0x00002aaaab30afea in nsThread::ProcessNextEvent (this=0xf63ad0, mayWait=1,\nresult=0x4200316c) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:482", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#7  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0x2e, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#8  0x00002aaaab30b14f in nsThread::ThreadFunc (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:251", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#9  0x00002aaaab6c5c24 in _pt_root (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptthread.c:220\n#10 0x00002aaaaabc80fa in start_thread () from /lib/libpthread.so.0\n#11 0x00002aaaadabace2 in clone () from /lib/libc.so.6", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#12 0x0000000000000000 in ??", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "()", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 6 (Thread 1107310944 (LWP 21962)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#0  0x00002aaaaabcd9cb in __fsync_nocancel () from /lib/libpthread.so.0\n#1  0x00002aaaaf995aca in full_fsync (fd=46, fullSync=0, dataOnly=2) at\n/home/sayrer/firefox/mozilla/db/sqlite3/src/os_unix.c:1075", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#2  0x00002aaaaf995ae5 in unixSync (id=<value optimized out>, dataOnly=0) at\n/home/sayrer/firefox/mozilla/db/sqlite3/src/os_unix.c:1103", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "---Type <return> to continue, or q <return> to quit---", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#3  0x00002aaaaf971d69 in ProcessOneMessage (aMessage=0x29fa860) at\n/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:1317\n#4  0x00002aaaaf972097 in ProcessAsyncMessages () at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:1430\n#5  0x00002aaaaf972db8 in AsyncWriteThread::Run (this=0xf72440) at\n/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:447\n#6  0x00002aaaab30afea in nsThread::ProcessNextEvent (this=0xf63ad0, mayWait=1,\nresult=0x4200316c) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:482", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#7  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0x2e, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#8  0x00002aaaab30b14f in nsThread::ThreadFunc (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:251", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#9  0x00002aaaab6c5c24 in _pt_root (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptthread.c:220\n#10 0x00002aaaaabc80fa in start_thread () from /lib/libpthread.so.0\n#11 0x00002aaaadabace2 in clone () from /lib/libc.so.6", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#12 0x0000000000000000 in ??", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "()", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Thread 3 (Thread 1090525536 (LWP 21956)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#0  0x00002aaaaabcac8f in pthread_cond_timedwait@@GLIBC_2.3.2 () from\n/lib/libpthread.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#1  0x00002aaaab6bf5fd in pt_TimedWait (cv=0x5546f8, ml=0x565b40, timeout=951)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "at /home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:280\n#2  0x00002aaaab6bfd93 in PR_WaitCondVar (cvar=0x5546f0, timeout=869951) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptsynch.c:407\n#3  0x00002aaaab31075e in TimerThread::Run (this=0x565a50) at\n/home/sayrer/firefox/mozilla/xpcom/threads/TimerThread.cpp:321\n#4  0x00002aaaab30afea in nsThread::ProcessNextEvent (this=0x6a10a0, mayWait=1,\nresult=0x4100116c) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:482", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#5  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0x5546fc, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#6  0x00002aaaab30b14f in nsThread::ThreadFunc (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:251", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#7  0x00002aaaab6c5c24 in _pt_root (arg=<value optimized out>) at\n/home/sayrer/firefox/mozilla/nsprpub/pr/src/pthreads/ptthread.c:220\n#8  0x00002aaaaabc80fa in start_thread () from /lib/libpthread.so.0\n#9  0x00002aaaadabace2 in clone () from /lib/libc.so.6", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#10 0x0000000000000000 in ??", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "()", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Thread 1 (Thread 46912559762448 (LWP 21949)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#0  0x00002aaaaabcd19f in __read_nocancel () from /lib/libpthread.so.0\n#1  0x00002aaab098c08a in nsAppShell::EventProcessorCallback (source=<value\noptimized out>, condition=<value optimized out>, data=<value optimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "at /home/sayrer/firefox/mozilla/widget/src/gtk2/nsAppShell.cpp:66\n#2  0x00002aaaad165bfd in g_main_context_dispatch () from", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/usr/lib/libglib-2.0.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#3  0x00002aaaad168ec5 in g_main_context_check () from", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/usr/lib/libglib-2.0.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#4  0x00002aaaad169374 in g_main_context_iteration () from", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/usr/lib/libglib-2.0.so.0", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#5  0x00002aaab098c396 in nsAppShell::ProcessNextNativeEvent (this=<value\noptimized out>, mayWait=-4240273) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/widget/src/gtk2/nsAppShell.cpp:144\n#6  0x00002aaab09a2c68 in nsBaseAppShell::DoProcessNextNativeEvent (this=0xc,\nmayWait=-4240273) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/home/sayrer/firefox/mozilla/widget/src/xpwidgets/nsBaseAppShell.cpp:136\n#7  0x00002aaab09a2ee9 in nsBaseAppShell::OnProcessNextEvent (this=0x578850,\nthr=0x554590, mayWait=1, recursionDepth=<value optimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/widget/src/xpwidgets/nsBaseAppShell.cpp:209\n#8  0x00002aaaab30af32 in nsThread::ProcessNextEvent (this=0x554590, mayWait=1,\nresult=0x7fffffbf4e3c) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:469", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "#9  0x00002aaaab2b3469 in NS_ProcessNextEvent_P (thread=0xc, mayWait=1) at\nnsThreadUtils.cpp:225", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#10 0x00002aaaab30b458 in nsThread::Shutdown (this=0xf63ad0) at\n/home/sayrer/firefox/mozilla/xpcom/threads/nsThread.cpp:442", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "#11 0x00002aaaaf9714d8 in mozStorageService::FinishAsyncIO (this=<value\noptimized out>) at", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "/home/sayrer/firefox/mozilla/storage/src/mozStorageAsyncIO.cpp:557\n#12 0x00002aaaaf9733bd in mozStorageService::Observe (this=0xf73020,\naSubject=<value optimized out>, aTopic=<value optimized out>, aData=<value\noptimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/storage/src/mozStorageService.cpp:160\n#13 0x00002aaaab2c2d40 in nsObserverList::NotifyObservers (this=0xbc4860,\naSubject=0x0, aTopic=0x2aaaab33caab \"xpcom-shutdown-threads\", someData=0x0)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/xpcom/ds/nsObserverList.cpp:128\n#14 0x00002aaaab2c3e07 in nsObserverService::NotifyObservers (this=<value\noptimized out>, aSubject=0x0, aTopic=0x2aaaab33caab \"xpcom-shutdown-threads\",\nsomeData=0x0)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "at /home/sayrer/firefox/mozilla/xpcom/ds/nsObserverService.cpp:174\n#15 0x00002aaaab2b72cf in NS_ShutdownXPCOM_P (servMgr=0x570a18) at\n/home/sayrer/firefox/mozilla/xpcom/build/nsXPComInit.cpp:720\n#16 0x00002aaaaace3252 in ~ScopedXPCOMStartup (this=0x7fffffbf5260) at\n/home/sayrer/firefox/mozilla/toolkit/xre/nsAppRunner.cpp:553\n#17 0x00002aaaaace8575 in XRE_main (argc=<value optimized out>, argv=<value\noptimized out>, aAppData=<value optimized out>)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "at /home/sayrer/firefox/mozilla/toolkit/xre/nsAppRunner.cpp:2384\n#18 0x0000000000400788 in main (argc=12, argv=0x7fffffbf4c6f) at\n/home/sayrer/firefox/mozilla/browser/app/nsBrowserApp.cpp:61\n(gdb)", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-07-11 09:29:05", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #7)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> > The hang happens before AsyncWriteThread::Run() gets a chance to execute.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "I must be wrong about that...", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> Very interesting.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "That's confusing because the stack makes it look like\n> AsyncWriteThread::Run is refusing to exit.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "One way to fix the problem is to change the line here:", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "http://lxr.mozilla.org/seamonkey/source/storage/src/mozStorageAsyncIO.cpp#1450", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Currently it's", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "1449       // yield so the UI thread is more responsive", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "1450       PR_Sleep(PR_INTERVAL_NO_WAIT);", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "The lockup goes away with this:", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "1450       PR_Sleep(PR_MillisecondsToInterval(1));", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-07-11 09:54:14", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I find it somewhat alarming that AsyncWriteThread::Run is being called on more\nthan one thread.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I thought I recall Brett saying that this async flushing\nbusiness does not work from multiple threads.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Darin Fisher", 
            "email": "Darin Fisher"
        }, 
        {
            "date": "2006-07-11 10:50:13", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #10)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> I find it somewhat alarming that AsyncWriteThread::Run is being called on more\n> than one thread.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I thought I recall Brett saying that this async flushing\n> business does not work from multiple threads.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Yes, I noticed that as well -- all the async IO setup is per-process, so there\nshouldn't be two seperate threads going on.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The only thing that I can think of\nis that something is using mozStorageService as a component and not as a\nservice;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "it doesn't seem to have any protection in mozStorageService::Init\nagainst being initialized multiple times.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Vladimir Vukicevic (:vlad)", 
            "email": "Vladimir Vukicevic (:vlad)"
        }, 
        {
            "date": "2006-07-11 10:53:57", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #10)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> I find it somewhat alarming that AsyncWriteThread::Run is being called on more\n> than one thread.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The threads seem to be listed twice (?)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ".", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "No one could tell me what this meant,\nso maybe a gdb bug.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 24 (Thread 1140881760 (LWP 21985)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 18 (Thread 1140881760 (LWP 21985)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 9 (Thread 1107310944 (LWP 21962)):", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Thread 6 (Thread 1107310944 (LWP 21962)):", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }, 
        {
            "date": "2006-07-12 04:59:51", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "(In reply to comment #10)", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "> I find it somewhat alarming that AsyncWriteThread::Run is being called on more\n> than one thread.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I thought I recall Brett saying that this async flushing\n> business does not work from multiple threads.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It used to be the case that this would be bad, but then we needed it for the\nanti-phishing service.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "It should work now, perhaps the anti-phishing service is\ndoing something wrong?", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Brett Wilson", 
            "email": "Brett Wilson"
        }, 
        {
            "date": "2006-07-12 18:47:04", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "I still see this when browser.safebrowsing.enabled is set to false.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "So assuming\nanti-phising is being completely disabled with this pref.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": ", it is not to blame\nfor this.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Adam Guthrie", 
            "email": "Adam Guthrie"
        }, 
        {
            "date": "2006-09-16 14:26:57", 
            "sentences": [], 
            "name": "Jo Hermans", 
            "email": "Jo Hermans"
        }, 
        {
            "date": "2006-09-24 21:59:49", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "This is a SWAG, but in the thread manager landing, Darin changed\nmozStorageService to observe shutdown on \"xpcom-shutdown-threads\" instead of\n\"quit-application\".", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "http://bonsai.mozilla.org/cvsview2.cgi?", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "diff_mode=context&whitespace_mode=show&file=mozStorageService.cpp&branch=&root=/cvsroot&subdir=mozilla/storage/src&command=DIFF_FRAMESET&rev1=1.8&rev2=1.9", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "I changed it back to \"quit-application\" and I don't see the hang anymore.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "This\ndoesn't break anything obvious;", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "e.g.", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "history entries are still intact and I\ndon't see any assertions, but I have no idea what other implications this has.", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Adam Guthrie", 
            "email": "Adam Guthrie"
        }, 
        {
            "date": "2007-03-26 14:29:51", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "this works for me now...", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "reopen otherwise", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Robert Sayre", 
            "email": "Robert Sayre"
        }
    ], 
    "title": "Storage very slow / hanging on shutdown"
}