{
    "contributors": [
        [
            "Jeff Hammel [:jhammel]", 
            "lexrank"
        ], 
        [
            "Henrik Skupin (:whimboo)", 
            "email"
        ]
    ], 
    "title": "Mozmill 2.1 builds are failing to start Firefox as .app on OS X", 
    "comments": [
        {
            "date": "2011-11-18 07:51:15", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "There is a regression in Mozmill 2.1 which prevents us from starting the application directly. ", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "Using the full path down to the binary works.\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "$ mozmill -b /Applications/Firefox/Nightly.app/ -t mutt/mutt/tests/js/test_assertions.js \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | Traceback (most recent call last):\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/bin/mozmill\", line 8, in <module>\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "ERROR | load_entry_point('mozmill==2.0rc1', 'console_scripts', 'mozmill')()\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "ERROR |   File \"/Volumes/data/code/tools/mozmill-2.0/mozmill/mozmill/__init__.py\", line 678, in cli\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | CLI(args).run()\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "ERROR |   File \"/Volumes/data/code/tools/mozmill-2.0/mozmill/mozmill/__init__.py\", line 643, in run\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | runner = self.create_runner()\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/lib/python2.6/site-packages/mozrunner-4.0-py2.6.egg/mozrunner/runner.py\", line 412, in create_runner\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | return self.runner_class.create(**self.runner_args())\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/lib/python2.6/site-packages/mozrunner-4.0-py2.6.egg/mozrunner/runner.py\", line 73, in create\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | clean_profile=clean_profile, process_class=process_class)\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/lib/python2.6/site-packages/mozrunner-4.0-py2.6.egg/mozrunner/runner.py\", line 296, in __init__\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | Runner.__init__(self, profile, **kwargs)\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/lib/python2.6/site-packages/mozrunner-4.0-py2.6.egg/mozrunner/runner.py\", line 85, in __init__\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | self.binary = self.__class__.get_binary(binary)\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/lib/python2.6/site-packages/mozrunner-4.0-py2.6.egg/mozrunner/runner.py\", line 316, in get_binary\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | return Runner.get_binary(binary)\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |   File \"/Volumes/data/envs/mozmill-2/lib/python2.6/site-packages/mozrunner-4.0-py2.6.egg/mozrunner/runner.py\", line 129, in get_binary\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | \n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | return os.path.join(binary, 'Contents/MacOS/%s-bin' % cls.names[0])\n", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | IndexError\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | :\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR | list index out of range\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "ERROR |\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Henrik Skupin (:whimboo)", 
            "email": "Henrik Skupin (:whimboo)"
        }, 
        {
            "date": "2011-11-18 10:19:22", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Created attachment 575502 [details] [diff] [review]\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "keep proper scope\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "So I think this should fix this for Mac. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": " Really we're getting in trouble for having too many default ways of finding the browser and none of the flow is documented. ", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": " Henrik, could you test?\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Jeff Hammel [:jhammel]", 
            "email": "Jeff Hammel [:jhammel]"
        }, 
        {
            "date": "2011-11-18 10:27:12", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "see also bug 703646\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Jeff Hammel [:jhammel]", 
            "email": "Jeff Hammel [:jhammel]"
        }, 
        {
            "date": "2011-11-18 13:05:18", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Comment on attachment 575502 [details] [diff] [review]\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "keep proper scope\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">-        elif mozinfo.isMac and binary.find('Contents/MacOS/') == -1:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+        elif mozinfo.isMac and 'Contents/MacOS/' not in binary and cls.names:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">+            # default to first class name\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": ">             return os.path.join(binary, 'Contents/MacOS/%s-bin' % cls.names[0])\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Haven't tested yet. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "But I also don't think that this is the right way to go. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "When the users specifies an app bundle we already have a valid path. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "The only detail we are missing is the binary in the bundle. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "This one is referenced in 'Contents/Info.plist@binary'. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": true, 
                    "text": "We could use http://docs.python.org/dev/library/plistlib.html to read its value and append it to the path of the bundle path. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "There would be no need to magically guess how the binary is named, and we could get rid of this strange cls.names thingy.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Henrik Skupin (:whimboo)", 
            "email": "Henrik Skupin (:whimboo)"
        }, 
        {
            "date": "2011-11-19 09:59:01", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Here the code-snippet which should work:\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "import plistlib\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "info = plistlib.readPlist(\"%s/Contents/Info.plist\" % binary)\n", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "return os.path.join(binary, \"Contents/MacOS/%s\" % info['CFBundleExecutable'])\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Henrik Skupin (:whimboo)", 
            "email": "Henrik Skupin (:whimboo)"
        }, 
        {
            "date": "2011-11-21 09:39:16", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I would recommend we take the fix from https://bug703607.bugzilla.mozilla.org/attachment.cgi?id=575502 since it does keep the proper class scope and avoid sideeffects.\n", 
                    "is_in_email_summary": true
                }
            ], 
            "name": "Jeff Hammel [:jhammel]", 
            "email": "Jeff Hammel [:jhammel]"
        }, 
        {
            "date": "2011-11-21 09:58:14", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "Which side-effects? ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "With the patch you propose, we would still guess how the binary of the application bundle would be named. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "Means we probably are not able to correctly handle other XULrunner applications.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Henrik Skupin (:whimboo)", 
            "email": "Henrik Skupin (:whimboo)"
        }, 
        {
            "date": "2011-11-21 10:53:30", 
            "sentences": [
                {
                    "is_in_lex_summary": true, 
                    "text": "The current architecture will not work as we call the get_binary method as applied to the ABC Runner whereas the logic is contingent on being an implementor class with names. ", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": " The patch also generalizes the environment variable pattern.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Jeff Hammel [:jhammel]", 
            "email": "Jeff Hammel [:jhammel]"
        }, 
        {
            "date": "2011-11-21 10:58:22", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I'm still puzzled because I probably don't understand all the new logic which has been implemented since Mozmill 1.5. ", 
                    "is_in_email_summary": true
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "So you should probably ask for review from Clint or someone else. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": "My feedback stays and I would kinda see it discussed in a follow-up review request.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Henrik Skupin (:whimboo)", 
            "email": "Henrik Skupin (:whimboo)"
        }, 
        {
            "date": "2011-11-21 11:04:53", 
            "sentences": [
                {
                    "is_in_lex_summary": false, 
                    "text": "I'm not working on this bug at the moment. ", 
                    "is_in_email_summary": false
                }, 
                {
                    "is_in_lex_summary": false, 
                    "text": " We should land whatever we're landing for bug 703646 first.\n", 
                    "is_in_email_summary": false
                }
            ], 
            "name": "Jeff Hammel [:jhammel]", 
            "email": "Jeff Hammel [:jhammel]"
        }, 
        {
            "date": "2011-12-16 10:22:26", 
            "sentences": [], 
            "name": "Jeff Hammel [:jhammel]", 
            "email": "Jeff Hammel [:jhammel]"
        }
    ], 
    "id": "703607", 
    "project": "Mozilla", 
    "original_link": "https://bugzilla.mozilla.org/show_bug.cgi?id=703607"
}